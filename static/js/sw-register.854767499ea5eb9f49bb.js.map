{"version":3,"sources":["webpack:///static/js/sw-register.854767499ea5eb9f49bb.js","webpack:///./src/sw-register.js"],"names":["webpackJsonp","101","module","exports","navigator","handlerUpdateMessage","e","metas","document","getElementsByTagName","i","len","length","meta","name","content","dom","createElement","innerHTML","refreshHtml","body","appendChild","setTimeout","getElementById","className","serviceWorker","register","addEventListener","data"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,GCGxB,GAAI,iBAAmBC,WAAW,CAO9B,GAAMC,GAAuB,SAAAC,GAMzB,IAAK,GAFCC,GAAQC,SAASC,qBAAqB,QAEnCC,EAAI,EAAGC,EAAMJ,EAAMK,OAAQF,EAAIC,EAAKD,IAAK,CAC9C,GAAIG,GAAON,EAAMG,EACC,iBAAdG,EAAKC,OACLD,EAAKE,QAAU,QAIvB,GASMC,GAAMR,SAASS,cAAc,MACnCD,GAAIE,UAVEC,kRAWNX,SAASY,KAAKC,YAAYL,GAC1BM,WAAW,iBAAMd,UAASe,eAAe,eAAeC,WAAa,qBAAqB,IAI9FpB,WAAUqB,cAAcC,SAAS,sBAEjCtB,UAAUqB,cAAcE,iBAAiB,UAAW,SAAArB,GAEjC,kBAAXA,EAAEsB,MACFvB,UDPT","file":"static/js/sw-register.854767499ea5eb9f49bb.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ 101:\n/***/ (function(module, exports) {\n\n\n\nif ('serviceWorker' in navigator) {\n    var handlerUpdateMessage = function handlerUpdateMessage(e) {\n\n        var metas = document.getElementsByTagName('meta');\n\n        for (var i = 0, len = metas.length; i < len; i++) {\n            var meta = metas[i];\n            if (meta.name === 'theme-color') {\n                meta.content = '#000';\n            }\n        }\n\n        var refreshHtml = '\\n            <div class=\"app-refresh\" id=\"app-refresh\">\\n                <div class=\"app-refresh-wrap\">\\n                    <span>\\u5DF2\\u66F4\\u65B0\\u6700\\u65B0\\u7248\\u672C</span>\\n                    <button onclick=\"location.reload()\">\\u70B9\\u51FB\\u5237\\u65B0</button>\\n                </div>\\n            </div>\\n        ';\n\n        var dom = document.createElement('div');\n        dom.innerHTML = refreshHtml;\n        document.body.appendChild(dom);\n        setTimeout(function () {\n            return document.getElementById('app-refresh').className += ' app-refresh-show';\n        }, 16);\n    };\n\n    navigator.serviceWorker.register('/service-worker.js');\n\n    navigator.serviceWorker.addEventListener('message', function (e) {\n        if (e.data === 'updateMessage') {\n            handlerUpdateMessage(e);\n        }\n    });\n}\n\n/***/ })\n\n},[101]);\n\n\n// WEBPACK FOOTER //\n// static/js/sw-register.854767499ea5eb9f49bb.js","/**\n * @file 注册 service-worker.js， 并监听 service-worker.js 升级更新\n * @author zoumiaojiang(zoumiaojiang@gmail.com)\n */\n\n\nif ('serviceWorker' in navigator) {\n\n    /**\n     * 处理 service worker 更新\n     *\n     * @param  {Object} e event source\n     */\n    const handlerUpdateMessage = e => {\n\n        // 在这里可以检测到 service worker 文件的更新，通常我们建议做页面的 reload\n\n        const metas = document.getElementsByTagName('meta');\n\n        for (let i = 0, len = metas.length; i < len; i++) {\n            let meta = metas[i];\n            if (meta.name === 'theme-color') {\n                meta.content = '#000';\n            }\n        }\n\n        const refreshHtml = `\n            <div class=\"app-refresh\" id=\"app-refresh\">\n                <div class=\"app-refresh-wrap\">\n                    <span>已更新最新版本</span>\n                    <button onclick=\"location.reload()\">点击刷新</button>\n                </div>\n            </div>\n        `;\n\n        const dom = document.createElement('div');\n        dom.innerHTML = refreshHtml;\n        document.body.appendChild(dom);\n        setTimeout(() => document.getElementById('app-refresh').className += ' app-refresh-show', 16);\n    };\n\n\n    navigator.serviceWorker.register('/service-worker.js');\n\n    navigator.serviceWorker.addEventListener('message', e => {\n        // received the update message from sw\n        if (e.data === 'updateMessage') {\n            handlerUpdateMessage(e);\n        }\n    });\n\n    // handlerUpdateMessage();\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/sw-register.js"],"sourceRoot":""}